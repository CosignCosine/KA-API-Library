var KA={requestCallback:function(t){return new Promise(function(n,a){fetchJsonp(t).then(function(t){n(t.json())}).catch(function(t){a(t)})})},user:function(t){return new Promise(function(n,a){KA.requestCallback("https://www.khanacademy.org/api/internal/user/profile"+("kaid"===t.substr(0,4)?"?kaid="+t:"?username="+t)).then(function(a){var e=Object.assign({},a,{programs:function(){return new Promise(function(n,a){KA.requestCallback("https://www.khanacademy.org/api/internal/user/scratchpads"+("kaid"===t.substr(0,4)?"?kaid="+t:"?username="+t)).then(n).catch(a)})},badges:function(){return new Promise(function(n,a){KA.requestCallback("https://www.khanacademy.org/api/internal/user/badges"+("kaid"===t.substr(0,4)?"?kaid="+t:"?username="+t)).then(n).catch(a)})},statistics:function(){return new Promise(function(n,a){KA.requestCallback("https://www.khanacademy.org/api/internal/user/discussion/statistics"+("kaid"===t.substr(0,4)?"?kaid="+t:"?username="+t)).then(n).catch(a)})}});n(e)}).catch(function(t){a(t)})})},listPrograms:function(t,n){return t=t||"hot",n=n||10,isNaN(t)&&(t={top:5,contests:4,hot:3,recent:2}[t]),new Promise(function(a,e){KA.requestCallback("https://www.khanacademy.org/api/internal/scratchpads/top?sort="+t+"&limit="+n).then(function(t){a(t)}).catch(function(t){e(t)})})},program:function(t){return new Promise(function(n,a){KA.requestCallback("https://www.khanacademy.org/api/labs/scratchpads/"+t).then(function(t){n(t)}).catch(function(t){a(t)})})}};
